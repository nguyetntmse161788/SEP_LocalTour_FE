import{r as a,i as j,k as g,l as u,j as e,B as o,T as s,P as m,A as f,m as l,H as p}from"./index-Cc_uhaw2.js";import{C as y}from"./config-global-DYC5wpSI.js";import{C as v}from"./CircularProgress-eYthGOLM.js";import{G as t}from"./Grid-CLWcti-q.js";import{S as b}from"./Stack-ChOdYhtb.js";function w(){const[r,d]=a.useState(null),[c,h]=a.useState(!0);return a.useEffect(()=>{(async()=>{try{const n=localStorage.getItem("userId");let i=localStorage.getItem("accessToken");if(!i||j(i))try{i=await g()}catch{throw console.error("Unable to refresh access token"),new Error("Token refresh failed")}const x=await u.get(`https://api.localtour.space/api/User/getProfile?userId=${n}`,{headers:{Authorization:`Bearer ${i}`}});d(x.data)}catch(n){console.error("Error fetching user profile:",n)}finally{h(!1)}})()},[]),c?e.jsx(o,{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",children:e.jsx(v,{})}):r?e.jsx(o,{display:"flex",minHeight:"100vh",bgcolor:"background.default",p:3,children:e.jsx(m,{elevation:3,sx:{width:"100%",maxWidth:800,p:4,borderRadius:2},children:e.jsxs(t,{container:!0,spacing:3,children:[e.jsx(t,{item:!0,xs:12,textAlign:"center",children:e.jsx(f,{src:r.userProfileImage,alt:r.fullName,sx:{width:150,height:150,border:"4px solid",borderColor:"primary.main",marginBottom:2}})}),e.jsx(l,{sx:{width:"100%"}}),e.jsx(t,{item:!0,xs:12,children:e.jsxs(b,{spacing:2,children:[e.jsxs(s,{variant:"body1",children:[e.jsx("strong",{children:"Full Name:"})," ",r.fullName]}),e.jsxs(s,{variant:"body1",children:[e.jsx("strong",{children:"User Name:"})," ",r.userName]}),e.jsxs(s,{variant:"body1",children:[e.jsx("strong",{children:"Email:"})," ",r.email||"N/A"]}),e.jsxs(s,{variant:"body1",children:[e.jsx("strong",{children:"Phone:"})," ",r.phoneNumber||"N/A"]}),e.jsxs(s,{variant:"body1",children:[e.jsx("strong",{children:"Date of Birth:"})," ",r.dateOfBirth||"N/A"]}),e.jsxs(s,{variant:"body1",children:[e.jsx("strong",{children:"Gender:"})," ",r.gender||"N/A"]}),e.jsxs(s,{variant:"body1",children:[e.jsx("strong",{children:"Address:"})," ",r.address||"N/A"]})]})}),e.jsx(l,{sx:{width:"100%"}}),e.jsxs(t,{item:!0,container:!0,xs:12,spacing:2,children:[e.jsxs(t,{item:!0,xs:6,children:[e.jsxs(s,{variant:"body1",children:[e.jsx("strong",{children:"Followers:"})," ",r.totalFollowers]}),e.jsxs(s,{variant:"body1",children:[e.jsx("strong",{children:"Following:"})," ",r.totalFollowed]})]}),e.jsxs(t,{item:!0,xs:6,textAlign:"center",children:[e.jsxs(s,{variant:"body1",children:[e.jsx("strong",{children:"Posts:"})," ",r.totalPosteds]}),e.jsxs(s,{variant:"body1",children:[e.jsx("strong",{children:"Reviews:"})," ",r.totalReviews]})]})]}),e.jsx(t,{item:!0,xs:12})]})})}):e.jsx(s,{variant:"h6",textAlign:"center",children:"No user data found. Please log in."})}function F(){return e.jsxs(e.Fragment,{children:[e.jsx(p,{children:e.jsxs("title",{children:[" ",`User Profile - ${y.appName}`]})}),e.jsx(w,{})]})}export{F as default};
