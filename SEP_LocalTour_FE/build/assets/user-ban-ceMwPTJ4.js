import{ak as U,r as n,w as k,j as e,B as l,T as r,h as j,l as I,H as D}from"./index-Cc_uhaw2.js";import{C as S}from"./config-global-DYC5wpSI.js";import{C as T}from"./Card-aOnlRS-j.js";import{C as w}from"./CardContent-BDr562ta.js";import{T as E}from"./TextField-D9kvPmME.js";import{C as F}from"./CircularProgress-eYthGOLM.js";import"./useFormControl-La3rWkRi.js";import"./Select-DNzxC7qm.js";import"./InputLabel-CpWSz3oH.js";function P(){const{state:B}=U(),{userId:o,username:d,endDate:C}=B||{},[i,u]=n.useState(C||""),[m,t]=n.useState(""),[g,h]=n.useState(""),[x,p]=n.useState(!1),v=k(),c=localStorage.getItem("accessToken");c||console.error("No token found");const y=a=>{u(a.target.value)},b=async()=>{var a,f;if(!i){t("Ban end date is required.");return}if(!c){t("Authentication required. Please log in again.");return}p(!0),t(""),h("");try{const s=await I.put(`https://api.localtour.space/api/User/BanUser?userId=${o}&endDate=${encodeURIComponent(i)}`,null,{headers:{Authorization:`Bearer ${c}`}});s.status===200?(h("User banned successfully!"),u("")):t(`Failed to ban user. Server returned status: ${s.status}`)}catch(s){t(((f=(a=s.response)==null?void 0:a.data)==null?void 0:f.message)||"Failed to ban user. Please try again.")}finally{p(!1)}};return e.jsx(l,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"70vh",bgcolor:"#f9f9f9",sx:{maxWidth:"90vw",padding:2},children:e.jsx(T,{sx:{width:400,padding:3},children:e.jsxs(w,{children:[e.jsx(r,{variant:"h5",align:"center",marginBottom:2,children:"Ban User"}),m&&e.jsx(r,{color:"error",variant:"body2",align:"center",marginBottom:2,children:m}),g&&e.jsx(r,{color:"success.main",variant:"body2",align:"center",marginBottom:2,children:g}),o&&d&&e.jsxs(e.Fragment,{children:[e.jsxs(r,{variant:"body1",marginBottom:1,children:[e.jsx("strong",{children:"ID:"})," ",o]}),e.jsxs(r,{variant:"body1",marginBottom:1,children:[e.jsx("strong",{children:"User Name:"})," ",d]}),e.jsx(E,{label:"Ban End Date",type:"date",value:i,onChange:y,fullWidth:!0,sx:{mt:2,mb:3},InputLabelProps:{shrink:!0}}),e.jsx(l,{textAlign:"center",marginTop:2,children:e.jsx(j,{variant:"contained",color:"error",onClick:b,sx:{width:"100%"},disabled:x,children:x?e.jsx(F,{size:24}):"Ban User"})})]}),e.jsx(l,{textAlign:"center",marginTop:2,children:e.jsx(j,{variant:"text",onClick:()=>v("/admin/user "),sx:{width:"100%"},children:"Back to List"})})]})})})}function G(){return e.jsxs(e.Fragment,{children:[e.jsx(D,{children:e.jsxs("title",{children:[" ",`Report User - ${S.appName}`]})}),e.jsx(P,{})]})}export{G as default};
