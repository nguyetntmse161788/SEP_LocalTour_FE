import{aX as U,r,O as I,j as e,B as l,C as k,T as a,h as f,w as D,t as S,H as T}from"./index-z39hXFLl.js";import{C as w}from"./config-global-BwHnWRtc.js";import{C as E}from"./CardContent-BI-lLdRp.js";import{T as F}from"./TextField-B2lMQ9Li.js";import"./InputLabel-D6bSjKO1.js";function P(){const{state:B}=U(),{userId:o,username:d,endDate:v}=B||{},[i,u]=r.useState(v||""),[g,t]=r.useState(""),[h,m]=r.useState(""),[x,p]=r.useState(!1),y=I(),c=localStorage.getItem("accessToken");c||console.error("No token found");const C=s=>{u(s.target.value)},b=async()=>{var s,j;if(!i){t("Ban end date is required.");return}if(!c){t("Authentication required. Please log in again.");return}p(!0),t(""),m("");try{const n=await S.put(`https://api.localtour.space/api/User/BanUser?userId=${o}&endDate=${encodeURIComponent(i)}`,null,{headers:{Authorization:`Bearer ${c}`}});n.status===200?(m("User banned successfully!"),u("")):t(`Failed to ban user. Server returned status: ${n.status}`)}catch(n){t(((j=(s=n.response)==null?void 0:s.data)==null?void 0:j.message)||"Failed to ban user. Please try again.")}finally{p(!1)}};return e.jsx(l,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"70vh",bgcolor:"#f9f9f9",sx:{maxWidth:"90vw",padding:2},children:e.jsx(k,{sx:{width:400,padding:3},children:e.jsxs(E,{children:[e.jsx(a,{variant:"h5",align:"center",marginBottom:2,children:"Ban User"}),g&&e.jsx(a,{color:"error",variant:"body2",align:"center",marginBottom:2,children:g}),h&&e.jsx(a,{color:"success.main",variant:"body2",align:"center",marginBottom:2,children:h}),o&&d&&e.jsxs(e.Fragment,{children:[e.jsxs(a,{variant:"body1",marginBottom:1,children:[e.jsx("strong",{children:"ID:"})," ",o]}),e.jsxs(a,{variant:"body1",marginBottom:1,children:[e.jsx("strong",{children:"User Name:"})," ",d]}),e.jsx(F,{label:"Ban End Date",type:"date",value:i,onChange:C,fullWidth:!0,sx:{mt:2,mb:3},InputLabelProps:{shrink:!0}}),e.jsx(l,{textAlign:"center",marginTop:2,children:e.jsx(f,{variant:"contained",color:"error",onClick:b,sx:{width:"100%"},disabled:x,children:x?e.jsx(D,{size:24}):"Ban User"})})]}),e.jsx(l,{textAlign:"center",marginTop:2,children:e.jsx(f,{variant:"text",onClick:()=>y("/admin/user "),sx:{width:"100%"},children:"Back to List"})})]})})})}function R(){return e.jsxs(e.Fragment,{children:[e.jsx(T,{children:e.jsxs("title",{children:[" ",`Report User - ${w.appName}`]})}),e.jsx(P,{})]})}export{R as default};
