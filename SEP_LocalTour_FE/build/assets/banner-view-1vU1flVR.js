import{j as e,x as D,T as m,I as g,y as T,B as S,w as L,h as R,r as d,l as E,z as O,H as A}from"./index-D4PwaD5N.js";import{C as H}from"./config-global-DYC5wpSI.js";import{c as b,d as u,b as V,T as $,a as z,e as G}from"./TableRow-B7nkHKsf.js";import{O as U}from"./Select-545m9gIo.js";import{I as W}from"./InputAdornment-BfKJzYYN.js";import{T as v,b as M,a as _}from"./TableSortLabel-CWuwd1kD.js";import{v as q}from"./utils-C5x2pCfd.js";import{C as J}from"./Checkbox-B4qOLwXZ.js";import{C as K}from"./Card-CkOvGVvy.js";import"./useFormControl-BxpVqGaN.js";import"./Popper-ChwOFtB3.js";import"./LastPage-B1ewK7Uw.js";function Q({emptyRows:t,height:a,sx:n,...r}){return t?e.jsx(b,{sx:{...a&&{height:a*t},...n},...r,children:e.jsx(u,{colSpan:9})}):null}function X({numSelected:t,filterName:a,onFilterName:n}){return e.jsxs(D,{sx:{height:96,display:"flex",justifyContent:"space-between",p:r=>r.spacing(0,1,0,3),...t>0&&{color:"primary.main",bgcolor:"primary.lighter"}},children:[t>0?e.jsxs(m,{component:"div",variant:"subtitle1",children:[t," selected"]}):e.jsx(U,{fullWidth:!0,value:a,onChange:n,placeholder:"Search user...",startAdornment:e.jsx(W,{position:"start",children:e.jsx(g,{width:20,icon:"eva:search-fill",sx:{color:"text.disabled"}})}),sx:{maxWidth:320}}),t>0?e.jsx(v,{title:"Delete",children:e.jsx(T,{children:e.jsx(g,{icon:"solar:trash-bin-trash-bold"})})}):e.jsx(v,{title:"Filter list",children:e.jsx(T,{children:e.jsx(g,{icon:"ic:round-filter-list"})})})]})}function Y({order:t,orderBy:a,rowCount:n,headLabel:r,numSelected:l,onSort:i,onSelectAllRows:s}){return e.jsx(V,{children:e.jsxs(b,{children:[s&&e.jsx(u,{padding:"checkbox",children:e.jsx(J,{indeterminate:l>0&&l<n,checked:n>0&&l===n,onChange:o=>s(o.target.checked)})}),r.map(o=>e.jsx(u,{align:o.align||"left",sortDirection:a===o.id?t:!1,children:o.sortable?e.jsxs(M,{active:a===o.id,direction:a===o.id?t:"asc",onClick:()=>i(o.id),children:[o.label,a===o.id?e.jsx(S,{component:"span",sx:q,children:t==="desc"?"sorted descending":"sorted ascending"}):null]}):o.label},o.id))]})})}function Z({row:t,selected:a,onSelectRow:n}){const r=L(),l=()=>{r(`/admin/bannerUser/${t.id}`,{state:{banner:t}})};return e.jsxs(b,{hover:!0,tabIndex:-1,role:"checkbox",selected:a,children:[e.jsx(u,{children:t.bannerName}),e.jsx(u,{children:e.jsx("img",{alt:`Banner of ${t.bannerName}`,src:t.bannerUrl,style:{width:"300px",height:"50px",objectFit:"cover"}})}),e.jsx(u,{children:t.authorName}),e.jsx(u,{children:new Date(t.createdDate).toLocaleString()}),e.jsx(u,{children:new Date(t.updatedDate).toLocaleString()}),e.jsx(u,{children:e.jsx(R,{variant:"outlined",color:"primary",onClick:l,children:"View Detail"})})]})}function ee(t,a,n){return t?Math.max(0,(1+t)*a-n):0}function N(t,a,n){return a[n]<t[n]?-1:a[n]>t[n]?1:0}function te(t,a){return t==="desc"?(n,r)=>N(n,r,a):(n,r)=>-N(n,r,a)}function ne({inputData:t,comparator:a,filterName:n}){const r=t.map((i,s)=>[i,s]);r.sort((i,s)=>{const o=a(i[0],s[0]);return o!==0?o:i[1]-s[1]});let l=r.map(i=>i[0]);if(n){const i=n.toLowerCase();l=l.filter(s=>s.bannerName&&s.bannerName.toLowerCase().includes(i)||s.authorName&&s.authorName.toLowerCase().includes(i)||s.authorId&&s.authorId.toLowerCase().includes(i))}return l}function ae(){const[t,a]=d.useState([]),[n,r]=d.useState(!0),[l,i]=d.useState(""),[s,o]=d.useState(""),[p,y]=d.useState(0),[h,P]=d.useState(5),[j,C]=d.useState("bannerName"),[f,F]=d.useState("asc");d.useEffect(()=>{const c=localStorage.getItem("accessToken");if(!c){i("No access token found. Please log in."),r(!1);return}I(c)},[]);const I=async c=>{try{const x=await E.get("https://api.localtour.space/api/Banner/GetAll",{headers:{Authorization:`Bearer ${c}`}});a(x.data)}catch{i("Failed to fetch banners.")}finally{r(!1)}},w=ne({inputData:t,comparator:te(f,j),filterName:s}),k=!w.length&&!!s,B=()=>{throw new Error("Function not implemented.")};return n?e.jsx(m,{children:"Loading..."}):l?e.jsx(m,{color:"error",children:l}):e.jsx(S,{sx:{p:3},children:e.jsxs(K,{children:[e.jsx(X,{filterName:s,onFilterName:c=>o(c.target.value),numSelected:0}),e.jsx(O,{children:e.jsx($,{children:e.jsxs(z,{children:[e.jsx(Y,{order:f,orderBy:j,onSort:c=>{F(j===c&&f==="asc"?"desc":"asc"),C(c)},rowCount:0,numSelected:0,headLabel:[]}),e.jsxs(G,{children:[w.slice(p*h,p*h+h).map(c=>e.jsx(Z,{row:c,selected:!1,onSelectRow:B},c.id)),e.jsx(Q,{emptyRows:ee(p,h,t.length)}),k&&e.jsx(m,{children:"No data found"})]})]})})}),e.jsx(_,{rowsPerPageOptions:[5,10,25],component:"div",count:t.length,rowsPerPage:h,page:p,onPageChange:(c,x)=>y(x),onRowsPerPageChange:c=>P(parseInt(c.target.value,10))})]})})}function je(){return e.jsxs(e.Fragment,{children:[e.jsx(A,{children:e.jsxs("title",{children:[" ",`Banner View - ${H.appName}`]})}),e.jsx(ae,{})]})}export{je as default};
