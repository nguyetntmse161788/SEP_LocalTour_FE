import{aF as S,r as x,K as D,j as e,D as p,B as i,q as k,T as a,h as o,I as T,G as n,C as d,H as N}from"./index-JURld8WI.js";import{C as R}from"./config-global-BwHnWRtc.js";import{a as P}from"./axiosInstance-CjnSQzAP.js";function $(){var g,v,y,f,b;const{id:h}=S(),[t,u]=x.useState(null),[w,j]=x.useState(!0),I=D();x.useEffect(()=>{(async()=>{const r=localStorage.getItem("accessToken");if(!r){console.error("No access token found");return}try{const c=await P.get(`https://api.localtour.space/api/Place/getPlaceById?languageCode=vi&placeid=${h}`,{headers:{Authorization:`Bearer ${r}`}});u(c.data),j(!1)}catch(c){console.error("Error fetching place details",c),j(!1)}})()},[h]);const m=async s=>{const r=localStorage.getItem("accessToken");if(!r){console.error("No access token found");return}try{console.log(`Changing status to: ${s}`),(await P.put(`https://api.localtour.space/api/Place/changeStatusPlace?placeid=${h}&status=${s}`,{},{headers:{Authorization:`Bearer ${r}`}})).status===200&&(console.log(`Status updated to: ${s}`),u(l=>({...l,status:s})))}catch(c){console.error("Error changing status",c)}};return w?e.jsx(p,{children:e.jsx(i,{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",children:e.jsx(k,{})})}):t?(t.status,t.status,t.status,e.jsxs(p,{children:[e.jsxs(i,{mb:4,display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsx(o,{variant:"outlined",color:"primary",startIcon:e.jsx(T,{icon:"eva:arrow-back-fill"}),onClick:()=>I("/place"),children:"Back to List"}),e.jsx(a,{variant:"h4",children:"Place Detail"}),e.jsx(o,{variant:"contained",color:"secondary",startIcon:e.jsx(T,{icon:"mingcute:edit-line"}),children:"Edit"})]}),e.jsxs(n,{container:!0,spacing:3,children:[e.jsx(n,{item:!0,xs:12,md:4,children:e.jsx(d,{sx:{p:2,boxShadow:3},children:e.jsx(i,{mb:2,display:"flex",justifyContent:"center",children:e.jsx("img",{src:t.photoDisplay,alt:(g=t.placeTranslations[0])==null?void 0:g.name,style:{width:"100%",height:"auto",maxHeight:"400px",objectFit:"cover"}})})})}),e.jsxs(n,{item:!0,xs:12,md:8,children:[e.jsxs(d,{sx:{p:3,boxShadow:3},children:[e.jsx(a,{variant:"h5",mb:2,children:(v=t.placeTranslations[0])==null?void 0:v.name}),e.jsxs(a,{variant:"body1",mb:2,children:["Address: ",(y=t.placeTranslations[0])==null?void 0:y.address]}),e.jsxs(a,{variant:"body1",mb:2,children:["Description: ",(f=t.placeTranslations[0])==null?void 0:f.description]}),e.jsxs(n,{container:!0,spacing:2,children:[e.jsx(n,{item:!0,xs:6,children:e.jsxs(a,{variant:"h6",children:["Opening Time: ",t.timeOpen]})}),e.jsx(n,{item:!0,xs:6,children:e.jsxs(a,{variant:"h6",children:["Closing Time: ",t.timeClose]})}),e.jsx(n,{item:!0,xs:6,children:e.jsxs(a,{variant:"h6",children:["Longitude: ",t.longitude]})}),e.jsx(n,{item:!0,xs:6,children:e.jsxs(a,{variant:"h6",children:["Latitude: ",t.latitude]})}),e.jsx(n,{item:!0,xs:6,children:e.jsxs(a,{variant:"h6",children:["Status: ",t.status==="Approved"?"Approved":t.status==="Rejected"?"Rejected":"Pending"]})})]}),e.jsxs(i,{mt:3,display:"flex",gap:2,children:[e.jsx(o,{variant:"contained",color:"success",onClick:()=>m("Approved"),disabled:t.status==="Approved",children:"Approved"}),e.jsx(o,{variant:"contained",color:"error",onClick:()=>m("Rejected"),disabled:t.status==="Rejected",children:"Rejected"})]})]}),t.placeTranslations.length>1&&e.jsxs(d,{sx:{mt:3,p:3,boxShadow:3},children:[e.jsx(a,{variant:"h6",mb:2,children:"Other Translations:"}),t.placeTranslations.map((s,r)=>e.jsxs(i,{mb:2,children:[e.jsxs(a,{variant:"body1",children:["Name: ",s.name]}),e.jsxs(a,{variant:"body1",children:["Description: ",s.description]}),e.jsxs(a,{variant:"body1",children:["Address: ",s.address]}),e.jsxs(a,{variant:"body1",children:["Contact: ",s.contact]})]},r))]})]})]}),((b=t.placeActivities)==null?void 0:b.length)>0&&e.jsxs(i,{mt:4,children:[e.jsx(a,{variant:"h5",mb:3,children:"Place Activity"}),e.jsx(n,{container:!0,spacing:3,children:t.placeActivities.map(s=>{var r,c,l,A,C;return e.jsx(n,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsxs(d,{sx:{p:2,boxShadow:2,borderRadius:2},children:[e.jsxs(i,{position:"relative",mb:2,children:[e.jsx("img",{src:s.photoDisplay,alt:((r=s.placeActivityTranslations[0])==null?void 0:r.activityName)||"Activity",style:{width:"100%",height:"auto",borderRadius:"8px",objectFit:"cover"}}),((c=s.placeActivityTranslations[0])==null?void 0:c.discount)>0&&e.jsx(i,{position:"absolute",top:8,right:8,bgcolor:"error.main",color:"white",px:1,py:.5,borderRadius:1,fontSize:"12px",fontWeight:"bold",children:"SALE"})]}),e.jsx(a,{variant:"h6",fontWeight:"bold",textAlign:"center",mb:1,children:(l=s.placeActivityTranslations[0])==null?void 0:l.activityName}),e.jsxs(i,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsx(i,{children:e.jsx(a,{variant:"subtitle1",color:"text.secondary",children:new Intl.NumberFormat("vi-VN",{style:"currency",currency:((A=s.placeActivityTranslations[0])==null?void 0:A.priceType)||"VND"}).format((C=s.placeActivityTranslations[0])==null?void 0:C.price)})}),e.jsx(o,{variant:"outlined",size:"small",color:"primary",children:"View"})]})]})},s.id)})})]})]})):e.jsx(p,{children:e.jsx(i,{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",children:e.jsx(a,{variant:"h5",children:"Place not found"})})})}function L(){return e.jsxs(e.Fragment,{children:[e.jsx(N,{children:e.jsxs("title",{children:[" ",`Place Details - ${R.appName}`]})}),e.jsx($,{})]})}export{L as default};
