import{aI as U,r as n,K as I,j as e,B as c,f as r,k as j,H as k}from"./index-BCEoXUgR.js";import{C as D}from"./config-global-BwHnWRtc.js";import{a as P}from"./index-Br0q4W-C.js";import{C as S}from"./Card-CnlOfLcQ.js";import{C as E}from"./CardContent-C-voxPcE.js";import{T as F}from"./TextField-DWe7D0BL.js";import{C as N}from"./CircularProgress-DD5OR9sX.js";import"./Select-BESDqWty.js";import"./InputLabel-b21gl_J5.js";function T(){const{state:B}=U(),{userId:o,userName:d,endDate:C}=B||{},[i,u]=n.useState(C||""),[m,t]=n.useState(""),[g,x]=n.useState(""),[h,p]=n.useState(!1),v=I(),l=localStorage.getItem("accessToken");l||console.error("No token found");const y=a=>{u(a.target.value)},b=async()=>{var a,f;if(!i){t("Ban end date is required.");return}if(!l){t("Authentication required. Please log in again.");return}p(!0),t(""),x("");try{const s=await P.put(`https://api.localtour.space/api/User/BanUser?userId=${o}&endDate=${encodeURIComponent(i)}`,null,{headers:{Authorization:`Bearer ${l}`}});s.status===200?(x("User banned successfully!"),u("")):t(`Failed to ban user. Server returned status: ${s.status}`)}catch(s){t(((f=(a=s.response)==null?void 0:a.data)==null?void 0:f.message)||"Failed to ban user. Please try again.")}finally{p(!1)}};return e.jsx(c,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"70vh",bgcolor:"#f9f9f9",sx:{maxWidth:"90vw",padding:2},children:e.jsx(S,{sx:{width:400,padding:3},children:e.jsxs(E,{children:[e.jsx(r,{variant:"h5",align:"center",marginBottom:2,children:"Ban User"}),m&&e.jsx(r,{color:"error",variant:"body2",align:"center",marginBottom:2,children:m}),g&&e.jsx(r,{color:"success.main",variant:"body2",align:"center",marginBottom:2,children:g}),o&&d&&e.jsxs(e.Fragment,{children:[e.jsxs(r,{variant:"body1",marginBottom:1,children:[e.jsx("strong",{children:"ID:"})," ",o]}),e.jsxs(r,{variant:"body1",marginBottom:1,children:[e.jsx("strong",{children:"User Name:"})," ",d]}),e.jsx(F,{label:"Ban End Date",type:"date",value:i,onChange:y,fullWidth:!0,sx:{mt:2,mb:3},InputLabelProps:{shrink:!0}}),e.jsx(c,{textAlign:"center",marginTop:2,children:e.jsx(j,{variant:"contained",color:"error",onClick:b,sx:{width:"100%"},disabled:h,children:h?e.jsx(N,{size:24}):"Ban User"})})]}),e.jsx(c,{textAlign:"center",marginTop:2,children:e.jsx(j,{variant:"text",onClick:()=>v("/admin"),sx:{width:"100%"},children:"Go to Profile"})})]})})})}function W(){return e.jsxs(e.Fragment,{children:[e.jsx(k,{children:e.jsxs("title",{children:[" ",`Report User - ${D.appName}`]})}),e.jsx(T,{})]})}export{W as default};
