import{r as a,j as t,y as w,B as y,f as j,S as R,H as T}from"./index-BP3v-hLU.js";import{C as A}from"./config-global-BwHnWRtc.js";import{a as B}from"./index-Br0q4W-C.js";import{a as N,g as F,P as v,b as k,c as $,T as D,e as I,d as E}from"./place-table-toolbar-9-QuLi_8.js";import{C as O}from"./Card-lDiFzRbA.js";import{d as H,e as L,f as V,g as z}from"./TableSortLabel-CQH1L_JY.js";import"./Checkbox-BMVmTwfm.js";import"./Select-DTOhA_m3.js";import"./LastPage-CUb5BTNb.js";const G=async(l=1,m=5,i="vi",p="",r="")=>{const u=localStorage.getItem("accessToken");if(console.log("Access Token:",u),!u)return console.error("No access token found"),{items:[],totalCount:0};try{const s=await B.get(`https://api.localtour.space/api/Place/getAllByRole?LanguageCode=${i}&Page=${l}&Size=${m}&SearchTerm=${encodeURIComponent(p)}&Status=${r}`,{headers:{Authorization:`Bearer ${u}`}});return console.log("API Response:",s.data),{items:s.data.items,totalCount:s.data.totalCount}}catch(s){return console.error("Error fetching places",s),{items:[],totalCount:0}}};function Q(){const[l,m]=a.useState([]),[i,p]=a.useState(0),[r,u]=a.useState(""),[s,P]=a.useState("vi"),[d,g]=a.useState(1),[c,b]=a.useState(5),[h,n]=a.useState("");a.useEffect(()=>{(async()=>{const{items:S,totalCount:C}=await G(d,c,s,r,h);m(S),p(C)})()},[d,c,s,r,h]);const e=U(),f=N({inputData:l,comparator:F(e.order,e.orderBy),filterName:r,filterStatus:h}),x=!f.length&&!!r;return t.jsxs(w,{children:[t.jsx(y,{display:"flex",alignItems:"center",mb:5,children:t.jsx(j,{variant:"h4",flexGrow:1,children:"Places"})}),t.jsxs(O,{children:[t.jsx(v,{numSelected:e.selected.length,filterName:r,onFilterName:o=>{u(o.target.value),g(1)},onFilterStatus:o=>{n(o||""),g(1)}}),t.jsx(R,{children:t.jsx(H,{sx:{overflow:"unset"},children:t.jsxs(L,{sx:{minWidth:800},children:[t.jsx(k,{order:e.order,orderBy:e.orderBy,rowCount:l.length,numSelected:e.selected.length,onSort:e.onSort,onSelectAllRows:o=>e.onSelectAllRows(o,l.map(S=>S.id)),headLabel:[{id:"name",label:"Name"},{id:"address",label:"Address"},{id:"description",label:"Description"},{id:"isVerify",label:"isVerify"},{id:"status",label:"Status"},{id:"View details",label:"View details"},{id:""}]}),t.jsxs(V,{children:[f.slice(e.page*c,e.page*c+c).map(o=>t.jsx($,{row:o,selected:e.selected.includes(o.id),onSelectRow:()=>e.onSelectRow(o.id)},o.id)),t.jsx(D,{height:68,emptyRows:I(e.page,e.rowsPerPage,l.length)}),x&&t.jsx(E,{searchQuery:r})]})]})})}),t.jsx(z,{component:"div",page:d-1,count:i,rowsPerPage:c,onPageChange:(o,S)=>g(S+1),rowsPerPageOptions:[5,10,25],onRowsPerPageChange:o=>{b(parseInt(o.target.value,10)),g(1)}})]})]})}function U(){const[l,m]=a.useState(0),[i,p]=a.useState("name"),[r,u]=a.useState(5),[s,P]=a.useState([]),[d,g]=a.useState("asc"),c=a.useCallback(n=>{g(i===n&&d==="asc"?"desc":"asc"),p(n)},[d,i]),b=a.useCallback((n,e)=>{if(n){P(e);return}P([])},[]),h=a.useCallback(n=>{const e=s.includes(n)?s.filter(f=>f!==n):[...s,n];P(e)},[s]);return{order:d,orderBy:i,rowsPerPage:r,selected:s,page:l,onSort:c,onSelectAllRows:b,onSelectRow:h,onResetPage:()=>m(0)}}function ee(){return t.jsxs(t.Fragment,{children:[t.jsx(T,{children:t.jsxs("title",{children:[" ",`Places - ${A.appName}`]})}),t.jsx(Q,{})]})}export{ee as default};
